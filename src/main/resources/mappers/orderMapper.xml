<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tryIt.mapper.JSW_OrderMapper">

 		<resultMap id="orderMap" type="com.tryIt.domain.JSW_OrderVO">
		        <result column="id" property="id"></result>
				<result column="order_date" property="order_date"></result>
				<result column="order_address" property="order_address"></result>
				<result column="order_postalcode" property="order_postalcode"></result>
				<result column="order_message" property="order_message"></result>
				<result column="order_seq" property="order_seq"></result>
				<result column="order_success" property="order_success"></result>
				<result column="order_receiver" property="order_receiver"></result>
				<result column="order_sender" property="order_sender"></result>
		  </resultMap>
	
	<insert id="insertOrder">
        insert into order(orde_user_id,order_date,order_address,order_postalcode,order_receiver,order_message,order_success,order_seq) values(#{member_id},#{product_id},)
    </insert>

	<select id="getAllOrder" resultMap = "orderMap">
		select * from member_order
	</select>
	
	<delete id="deleteOrder">
		delete from member_order where id = #{id}
	</delete>
	
	<select id="countOrderNum" resultType = "int">
		select count(*) from member_order
	</select>
	
	
	<select id="getOrderWithPaging" resultMap = "orderMap">
        <![CDATA[
            select *
                 from (
                        SELECT @ROWNUM := @ROWNUM + 1 AS rn,m.*
                        from member_order m
                        WHERE (@ROWNUM:=0) = 0 AND @ROWNUM < #{pageNum} * #{amount}
                        order by id desc
                )AS T
            where rn > (#{pageNum} - 1) * #{amount}
            
            ]]>
    </select>
	

</mapper>